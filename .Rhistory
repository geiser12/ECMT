#equation 1 loop
for (h in c(1,4,8)){
csum_ld_rgdp = 0*m2_ld_rdgp
for (i in (1:(T2-h))){
csum_ld_rgdp[i,] =sum(m2_ld_rdgp[i+1:(i+h),])
}
cat("Current Forecsting horizon: ", h)
print(cbind(head(m2_ld_rdgp,10),head(csum_ld_rgdp,10)))
reg = lm(csum_ld_rgdp[1:(t=T2-h),]/h-m2_spread[1:(T2-h),])
print(summary(reg))
print(coeftest(reg, vcov. = Neweywest(reg, lag = round(0.75*T2^(1/3)))))
}
#create a loop to check with equation 2
#for (h in c(1,4,8)){
# reg = lm(m2_ld_rgdp[(h+1):T2,]-m2_spread[1:(T2-h)])
#cat('current forecasting horizon', h)
#print(summary(reg))
#}
#equation 1 loop
for (h in c(1,4,8)){
csum_ld_rgdp = 0*m2_ld_rdgp
for (i in (1:(T2-h))){
csum_ld_rgdp[i,] =sum(m2_ld_rdgp[i+1:(i+h),])
}
cat("Current Forecsting horizon: ", h)
print(cbind(head(m2_ld_rdgp,10),head(csum_ld_rgdp,10)))
reg = lm(csum_ld_rgdp[1:(t=T2-h),]/h-m2_spread[1:(T2-h),])
print(summary(reg))
print(coeftest(reg, vcov. = Neweywest(reg, lag = round(0.75*T2^(1/3)))))
}
library(lmtest)
#create a loop to check with equation 2
#for (h in c(1,4,8)){
# reg = lm(m2_ld_rgdp[(h+1):T2,]-m2_spread[1:(T2-h)])
#cat('current forecasting horizon', h)
#print(summary(reg))
#}
#create the data that will be used for the loop
m2_ld_rgdp = window(ld_rgdp, end = "2011-12-31")
m2_spread = window(spread, end = "2011-12-31")
T2 = dim(m2_ld_rgdp)[1]
#equation 1 loop
for (h in c(1,4,8)){
csum_ld_rgdp = 0*m2_ld_rdgp
for (i in (1:(T2-h))){
csum_ld_rgdp[i,] =sum(m2_ld_rdgp[i+1:(i+h),])
}
cat("Current Forecsting horizon: ", h)
print(cbind(head(m2_ld_rdgp,10),head(csum_ld_rgdp,10)))
reg = lm(csum_ld_rgdp[1:(t=T2-h),]/h-m2_spread[1:(T2-h),])
print(summary(reg))
print(coeftest(reg, vcov. = NeweyWest(reg, lag = round(0.75*T2^(1/3)))))
}
#load libraries
library(tidyverse)
library(ggplot2)
library(quantmod)
library(Quandl)
library(sandwich)
library(lmtest)
#read in the data from fred
#first data set is the real GPD growth
#second data set loaded in will be:
#10-Year Treasury Constant Maturity Minus 2-Year Treasury Constant Maturity
Quandl.api_key("Bsjtos3Rumnys9NRFspt")
#import the dataset
hw8 <- Quandl(c('FRED/GDPC1','FRED/T10Y2Y'), collapse='quarterly', type="xts")
# Rename the variables
names(hw8)[1] <- "rgdp"
names(hw8)[2] <- "spread"
sum(with(hw8, is.na(rgdp)))
sum(with(hw8, is.na(spread)))
hw8 <- na.omit(hw8)  # 1976 Q2 ~ 2021 Q3
# Simple definition of growth rate vs. log-difference approximation
ld_rgdp <- na.exclude(diff(log(hw8$rgdp))  * 100)
T = dim(hw8)[1]
spread <- hw8[2:T,2]
#create the subsample
sub_sample_reg <- lm(window(ld_rgdp, end = "2011-12-31") ~ window(spread,end = "2011-12-31"))
summary(sub_sample_reg)
sub_sample_mean <- lm(window(ld_rgdp, end = "2011-12-31") ~ 1)
#create a loop to check with equation 2
#for (h in c(1,4,8)){
# reg = lm(m2_ld_rgdp[(h+1):T2,]-m2_spread[1:(T2-h)])
#cat('current forecasting horizon', h)
#print(summary(reg))
#}
#create the data that will be used for the loop
m2_ld_rgdp = window(ld_rgdp, end = "2011-12-31")
m2_spread = window(spread, end = "2011-12-31")
T2 = dim(m2_ld_rgdp)[1]
#equation 1 loop
for (h in c(1,4,8)){
csum_ld_rgdp = 0*m2_ld_rdgp
for (i in (1:(T2-h))){
csum_ld_rgdp[i,] =sum(m2_ld_rdgp[i+1:(i+h),])
}
cat("Current Forecsting horizon: ", h)
print(cbind(head(m2_ld_rdgp,10),head(csum_ld_rgdp,10)))
reg = lm(csum_ld_rgdp[1:(t=T2-h),]/h-m2_spread[1:(T2-h),])
print(summary(reg))
print(coeftest(reg, vcov. = NeweyWest(reg, lag = round(0.75*T2^(1/3)))))
}
View(m2_ld_rgdp)
#create the data that will be used for the loop
m2_ld_rgdp1 = window(ld_rgdp, end = "2011-12-31")
#equation 1 loop
for (h in c(1,4,8)){
csum_ld_rgdp = 0*m2_ld_rgdp
for (i in (1:(T2-h))){
csum_ld_rgdp[i,] =sum(m2_ld_rdgp[i+1:(i+h),])
}
cat("Current Forecsting horizon: ", h)
print(cbind(head(m2_ld_rdgp,10),head(csum_ld_rgdp,10)))
reg = lm(csum_ld_rgdp[1:(t=T2-h),]/h-m2_spread[1:(T2-h),])
print(summary(reg))
print(coeftest(reg, vcov. = NeweyWest(reg, lag = round(0.75*T2^(1/3)))))
}
for (i in (1:(T2-h))){
csum_ld_rgdp[i,] =sum(m2_ld_rdgp1[i+1:(i+h),])
}
#equation 1 loop
for (h in c(1,4,8)){
csum_ld_rgdp = 0*m2_ld_rgdp1
for (i in (1:(T2-h))){
csum_ld_rgdp[i,] =sum(m2_ld_rdgp1[i+1:(i+h),])
}
cat("Current Forecsting horizon: ", h)
print(cbind(head(m2_ld_rdgp1,10),head(csum_ld_rgdp,10)))
reg = lm(csum_ld_rgdp[1:(t=T2-h),]/h-m2_spread[1:(T2-h),])
print(summary(reg))
print(coeftest(reg, vcov. = NeweyWest(reg, lag = round(0.75*T2^(1/3)))))
}
source('~/GitHub/ECMT/HW8_example.R')
# Example for the homework
rm(list = ls())
library(Quandl)
#library(lubridate)
library(lmtest)
library(sandwich)
#library(forecast)
Quandl.api_key('Bsjtos3Rumnys9NRFspt')
hw8 <- Quandl(c('FRED/GDPC1','FRED/T10Y2Y'), collapse='quarterly', type="xts")
# Rename the variables
names(hw8)[1] <- "rgdp"
names(hw8)[2] <- "spread"
hw8 <- na.omit(hw8)  # 1976 Q2 ~ 2021 Q3
# Obtain the growth rates and make sure everything is aligned with respect to time t.
ld_rgdp <- na.exclude(diff(log(hw8$rgdp))  * 100)
T = dim(hw8)[1]
spread <- hw8[2:T,2]
m2_ld_rgdp = window(ld_rgdp, end = "2011-12-31")
m2_spread = window(spread,end = "2011-12-31")
T2 = dim(m2_ld_rgdp)[1]
for (h in c(1,4,12)){
csum_ld_rgdp = 0*m2_ld_rgdp
for (i in (1:(T2-h))){
csum_ld_rgdp[i,] =sum(m2_ld_rgdp[i:(i+h),])
}
cat("Current forecasting horizon: ", h)
print(cbind(head(m2_ld_rgdp,10),head(csum_ld_rgdp,10)))
reg = lm(csum_ld_rgdp[1:(T2-h),]/h~m2_spread[1:(T2-h),])
print(summary(reg))
for (h in c(1,4,12)){
csum_ld_rgdp = 0*m2_ld_rgdp
for (i in (1:(T2-h))){
csum_ld_rgdp[i,] =sum(m2_ld_rgdp[i:(i+h),])
}
cat("Current forecasting horizon: ", h)
print(cbind(head(m2_ld_rgdp,10),head(csum_ld_rgdp,10)))
reg = lm(csum_ld_rgdp[1:(T2-h),]/h~m2_spread[1:(T2-h),])
print(summary(reg))
print(coeftest(reg,vcov. = NeweyWest(reg, lag = round(0.75*T2^(1/3)))))
}
for (h in c(1,4,12)){
csum_ld_rgdp = 0*m2_ld_rgdp
for (i in (1:(T2-h))){
csum_ld_rgdp[i,] =sum(m2_ld_rgdp[i:(i+h),])
}}
for (h in c(1,4,12)){
csum_ld_rgdp = 0*m2_ld_rgdp
for (i in (1:(T2-h))){
csum_ld_rgdp[i,] =sum(m2_ld_rgdp[i:(i+h),])
}
cat("Current forecasting horizon: ", h)
print(head(m2_ld_rgdp,10))
print(head(csum_ld_rgdp,10))
reg = lm(csum_ld_rgdp[1:(T2-h),]/h~m2_spread[1:(T2-h),])
print(summary(reg))
print(coeftest(reg,vcov. = NeweyWest(reg, lag = round(0.75*T2^(1/3)))))
}
install.packages('lmtest')
rm(list = ls())
library(Quandl)
#library(lubridate)
library(lmtest)
library(sandwich)
#library(forecast)
Quandl.api_key('Bsjtos3Rumnys9NRFspt')
hw8 <- Quandl(c('FRED/GDPC1','FRED/T10Y2Y'), collapse='quarterly', type="xts")
# Rename the variables
names(hw8)[1] <- "rgdp"
names(hw8)[2] <- "spread"
hw8 <- na.omit(hw8)  # 1976 Q2 ~ 2021 Q3
# Obtain the growth rates and make sure everything is aligned with respect to time t.
ld_rgdp <- na.exclude(diff(log(hw8$rgdp))  * 100)
T = dim(hw8)[1]
spread <- hw8[2:T,2]
m2_ld_rgdp = window(ld_rgdp, end = "2011-12-31")
m2_spread = window(spread,end = "2011-12-31")
T2 = dim(m2_ld_rgdp)[1]
for (h in c(1,4,12)){
csum_ld_rgdp = 0*m2_ld_rgdp
for (i in (1:(T2-h))){
csum_ld_rgdp[i,] =sum(m2_ld_rgdp[i:(i+h),])
}
cat("Current forecasting horizon: ", h)
print(head(m2_ld_rgdp,10))
print(head(csum_ld_rgdp,10))
reg = lm(csum_ld_rgdp[1:(T2-h),]/h~m2_spread[1:(T2-h),])
print(summary(reg))
print(coeftest(reg,vcov. = NeweyWest(reg, lag = round(0.75*T2^(1/3)))))
}
knitr::opts_chunk$set(echo = TRUE)
#load libraries
library(tidyverse)
library(ggplot2)
library(quantmod)
library(Quandl)
library(sandwich)
library(lmtest)
#read in the data from fred
#first data set is the real GPD growth
#second data set loaded in will be:
#10-Year Treasury Constant Maturity Minus 2-Year Treasury Constant Maturity
Quandl.api_key("Bsjtos3Rumnys9NRFspt")
#import the dataset
hw8 <- Quandl(c('FRED/GDPC1','FRED/T10Y2Y'), collapse='quarterly', type="xts")
# Rename the variables
names(hw8)[1] <- "rgdp"
names(hw8)[2] <- "spread"
sum(with(hw8, is.na(rgdp)))
sum(with(hw8, is.na(spread)))
hw8 <- na.omit(hw8)  # 1976 Q2 ~ 2021 Q3
# Simple definition of growth rate vs. log-difference approximation
ld_rgdp <- na.exclude(diff(log(hw8$rgdp))  * 100)
T = dim(hw8)[1]
spread <- hw8[2:T,2]
#create the subsample
sub_sample_reg <- lm(window(ld_rgdp, end = "2011-12-31") ~ window(spread,end = "2011-12-31"))
summary(sub_sample_reg)
sub_sample_mean <- lm(window(ld_rgdp, end = "2011-12-31") ~ 1)
sum(with(hw8, is.na(spread)))
sum(with(hw8, is.na(rgdp)))
#load libraries
library(tidyverse)
library(ggplot2)
library(quantmod)
library(Quandl)
library(sandwich)
library(lmtest)
#read in the data from fred
#first data set is the real GPD growth
#second data set loaded in will be:
#10-Year Treasury Constant Maturity Minus 2-Year Treasury Constant Maturity
Quandl.api_key("Bsjtos3Rumnys9NRFspt")
#import the dataset
hw8 <- Quandl(c('FRED/GDPC1','FRED/T10Y2Y'), collapse='quarterly', type="xts")
# Rename the variables
names(hw8)[1] <- "rgdp"
names(hw8)[2] <- "spread"
#see if there are NA values
sum(with(hw8, is.na(rgdp)))
sum(with(hw8, is.na(spread)))
hw8 <- na.omit(hw8)  # 1976 Q2 ~ 2021 Q3
# Simple definition of growth rate vs. log-difference approximation
ld_rgdp <- na.exclude(diff(log(hw8$rgdp))  * 100)
T = dim(hw8)[1]
spread <- hw8[2:T,2]
rm(list = ls())
#load libraries
library(tidyverse)
library(ggplot2)
library(quantmod)
library(Quandl)
library(sandwich)
library(lmtest)
#read in the data from fred
#first data set is the real GPD growth
#second data set loaded in will be:
#10-Year Treasury Constant Maturity Minus 2-Year Treasury Constant Maturity
Quandl.api_key("Bsjtos3Rumnys9NRFspt")
#import the dataset
hw8 <- Quandl(c('FRED/GDPC1','FRED/T10Y2Y'), collapse='quarterly', type="xts")
# Rename the variables
names(hw8)[1] <- "rgdp"
names(hw8)[2] <- "spread"
#see if there are NA values
sum(with(hw8, is.na(rgdp)))
sum(with(hw8, is.na(spread)))
hw8 <- na.omit(hw8)  # 1976 Q2 ~ 2021 Q3
# Simple definition of growth rate vs. log-difference approximation
ld_rgdp <- na.exclude(diff(log(hw8$rgdp))  * 100)
T = dim(hw8)[1]
spread <- hw8[2:T,2]
#create the subsample
sub_sample_reg <- lm(window(ld_rgdp, end = "2011-12-31") ~ window(spread,end = "2011-12-31"))
summary(sub_sample_reg)
sub_sample_mean <- lm(window(ld_rgdp, end = "2011-12-31") ~ 1)
#equation 1 loop
for (h in c(1,4,8)){
csum_ld_rgdp = 0*m2_ld_rgdp1
for (i in (1:(T2-h))){
csum_ld_rgdp[i,] =sum(m2_ld_rdgp1[i+1:(i+h),])
}
cat("Current Forecsting horizon: ", h)
print(head(m2_ld_rgdp,10))
print(head(csum_ld_rgdp,10))
reg = lm(csum_ld_rgdp[1:(t=T2-h),]/h~m2_spread[1:(T2-h),])
print(summary(reg))
print(coeftest(reg, vcov. = NeweyWest(reg, lag = round(0.75*T2^(1/3)))))
}
m2_ld_rgdp1 = window(ld_rgdp, end = "2011-12-31")
m2_spread = window(spread, end = "2011-12-31")
T2 = dim(m2_ld_rgdp)[1]
T2 = dim(m2_ld_rgdp1)[1]
#equation 1 loop
for (h in c(1,4,8)){
csum_ld_rgdp = 0*m2_ld_rgdp1
for (i in (1:(T2-h))){
csum_ld_rgdp[i,] =sum(m2_ld_rdgp1[i+1:(i+h),])
}
cat("Current Forecsting horizon: ", h)
print(head(m2_ld_rgdp,10))
print(head(csum_ld_rgdp,10))
reg = lm(csum_ld_rgdp[1:(t=T2-h),]/h~m2_spread[1:(T2-h),])
print(summary(reg))
print(coeftest(reg, vcov. = NeweyWest(reg, lag = round(0.75*T2^(1/3)))))
}
#equation 1 loop
for (h in c(1,4,8)){
csum_ld_rgdp = 0*m2_ld_rgdp1
for (i in (1:(T2-h))){
csum_ld_rgdp[i,] =sum(m2_ld_rdgp1[i:(i+h),])
}
cat("Current Forecsting horizon: ", h)
print(head(m2_ld_rgdp,10))
print(head(csum_ld_rgdp,10))
reg = lm(csum_ld_rgdp[1:(t=T2-h),]/h~m2_spread[1:(T2-h),])
print(summary(reg))
print(coeftest(reg, vcov. = NeweyWest(reg, lag = round(0.75*T2^(1/3)))))
}
#equation 1 loop
for (h in c(1,4,8)){
csum_ld_rgdp = 0*m2_ld_rgdp1
for (i in (1:(T2-h))){
csum_ld_rgdp[i,] =sum(m2_ld_rdgp1[i+1:(i+h),])
}
cat("Current Forecsting horizon: ", h)
print(head(m2_ld_rgdp1,10))
print(head(csum_ld_rgdp,10))
reg = lm(csum_ld_rgdp[1:(t=T2-h),]/h~m2_spread[1:(T2-h),])
print(summary(reg))
print(coeftest(reg, vcov. = NeweyWest(reg, lag = round(0.75*T2^(1/3)))))
}
rm(list = ls())
#load libraries
library(tidyverse)
library(ggplot2)
library(quantmod)
library(Quandl)
library(sandwich)
library(lmtest)
#read in the data from fred
#first data set is the real GPD growth
#second data set loaded in will be:
#10-Year Treasury Constant Maturity Minus 2-Year Treasury Constant Maturity
Quandl.api_key("Bsjtos3Rumnys9NRFspt")
#import the dataset
hw8 <- Quandl(c('FRED/GDPC1','FRED/T10Y2Y'), collapse='quarterly', type="xts")
# Rename the variables
names(hw8)[1] <- "rgdp"
names(hw8)[2] <- "spread"
#see if there are NA values
sum(with(hw8, is.na(rgdp)))
sum(with(hw8, is.na(spread)))
hw8 <- na.omit(hw8)  # 1976 Q2 ~ 2021 Q3
# Simple definition of growth rate vs. log-difference approximation
ld_rgdp <- na.exclude(diff(log(hw8$rgdp))  * 100)
T = dim(hw8)[1]
spread <- hw8[2:T,2]
#create the subsample
sub_sample_reg <- lm(window(ld_rgdp, end = "2011-12-31") ~ window(spread,end = "2011-12-31"))
summary(sub_sample_reg)
sub_sample_mean <- lm(window(ld_rgdp, end = "2011-12-31") ~ 1)
#create a loop to check with equation 2
#for (h in c(1,4,8)){
# reg = lm(m2_ld_rgdp[(h+1):T2,]-m2_spread[1:(T2-h)])
#cat('current forecasting horizon', h)
#print(summary(reg))
#}
#create the data that will be used for the loop
m2_ld_rgdp1 = window(ld_rgdp, end = "2011-12-31")
m2_spread = window(spread, end = "2011-12-31")
T2 = dim(m2_ld_rgdp1)[1]
#equation 1 loop
for (h in c(1,4,8)){
csum_ld_rgdp = 0*m2_ld_rgdp1
for (i in (1:(T2-h))){
csum_ld_rgdp[i,] =sum(m2_ld_rdgp1[i+1:(i+h),])
}
cat("Current Forecsting horizon: ", h)
print(head(m2_ld_rgdp1,10))
print(head(csum_ld_rgdp,10))
reg = lm(csum_ld_rgdp[1:(t=T2-h),]/h~m2_spread[1:(T2-h),])
print(summary(reg))
print(coeftest(reg, vcov. = NeweyWest(reg, lag = round(0.75*T2^(1/3)))))
}
#equation 1 loop
for (h in c(1,4,8)){
csum_ld_rgdp = 0*m2_ld_rgdp1
for (i in (1:(T2-h))){
csum_ld_rgdp[i,] =sum(m2_ld_rgdp1[i+1:(i+h),])
}
cat("Current Forecsting horizon: ", h)
print(head(m2_ld_rgdp1,10))
print(head(csum_ld_rgdp,10))
reg = lm(csum_ld_rgdp[1:(t=T2-h),]/h~m2_spread[1:(T2-h),])
print(summary(reg))
print(coeftest(reg, vcov. = NeweyWest(reg, lag = round(0.75*T2^(1/3)))))
}
#equation 1 loop
for (h in c(1,4,8)){
csum_ld_rgdp = 0*m2_ld_rgdp1
for (i in (1:(T2-h))){
csum_ld_rgdp[i,] =sum(m2_ld_rgdp1[i:(i+h),])
}
cat("Current Forecsting horizon: ", h)
print(head(m2_ld_rgdp1,10))
print(head(csum_ld_rgdp,10))
reg = lm(csum_ld_rgdp[1:(t=T2-h),]/h~m2_spread[1:(T2-h),])
print(summary(reg))
print(coeftest(reg, vcov. = NeweyWest(reg, lag = round(0.75*T2^(1/3)))))
}
#equation 1 loop
for (h in c(1,4,8)){
csum_ld_rgdp = 0*m2_ld_rgdp1
for (i in (1:(T2-h))){
csum_ld_rgdp[i,] =sum(m2_ld_rgdp1[i+1:(i+h),])
}
cat("Current Forecsting horizon: ", h)
print(head(m2_ld_rgdp1,10))
print(head(csum_ld_rgdp,10))
reg = lm(csum_ld_rgdp[1:(t=T2-h),]/h~m2_spread[1:(T2-h),])
print(summary(reg))
print(coeftest(reg, vcov. = NeweyWest(reg, lag = round(0.75*T2^(1/3)))))
}
#equation 1 loop
for (h in c(1,4,8)){
csum_ld_rgdp = 0*m2_ld_rgdp1
for (i in (1:(T2-h))){
csum_ld_rgdp[i,] =sum(m2_ld_rgdp1[i:(i+h),])
}
cat("Current Forecsting horizon: ", h)
print(head(m2_ld_rgdp1,10))
print(head(csum_ld_rgdp,10))
reg = lm(csum_ld_rgdp[1:(t=T2-h),]/h~m2_spread[1:(T2-h),])
print(summary(reg))
print(coeftest(reg, vcov. = NeweyWest(reg, lag = round(0.75*T2^(1/3)))))
}
source('~/GitHub/ECMT/HW8_example.R')
source('~/GitHub/ECMT/HW8_example.R')
for (h in c(1,4,12)){
csum_ld_rgdp = 0*m2_ld_rgdp
for (i in (1:(T2-h))){
csum_ld_rgdp[i,] =sum(m2_ld_rgdp[i:(i+h),])
}
cat("Current forecasting horizon: ", h)
print(head(m2_ld_rgdp[1:(T2-h),],10))
print(head(csum_ld_rgdp[1:(T2-h),],10))
reg = lm(csum_ld_rgdp[1:(T2-h),]/h~m2_spread[1:(T2-h),])
print(summary(reg))
print(coeftest(reg,vcov. = NeweyWest(reg, lag = round(0.75*T2^(1/3)))))
}
for (h in c(1,4,12)){
csum_ld_rgdp = 0*m2_ld_rgdp
for (i in (1:(T2-h))){
csum_ld_rgdp[i,] =sum(m2_ld_rgdp[i:(i+h),])
}
cat("Current forecasting horizon: ", h)
print(head(m2_ld_rgdp,10))
print(head(csum_ld_rgdp,10))
reg = lm(csum_ld_rgdp[1:(T2-h),]/h~m2_spread[1:(T2-h),])
print(summary(reg))
print(coeftest(reg,vcov. = NeweyWest(reg, lag = round(0.75*T2^(1/3)))))
}
for (h in c(1,4,12)){
csum_ld_rgdp = 0*m2_ld_rgdp
for (i in (1:(T2-h))){
csum_ld_rgdp[i,] =sum(m2_ld_rgdp[i:(i+h),])
}
cat("Current forecasting horizon: ", h)
print(head(m2_ld_rgdp,10))
print(head(csum_ld_rgdp,10))
reg = lm(csum_ld_rgdp[1:(T2-h),]/h~m2_spread[1:(T2-h),])
print(summary(reg))
print(coeftest(reg,vcov. = NeweyWest(reg, lag = round(0.75*T2^(1/3)))))
}
library(tidyverse)
test <- matrix(1:6)
test<-data.frame(test)
View(test)
